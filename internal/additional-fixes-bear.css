/* Enhance font smoothing */
body, input, textarea, select, button {
    font-synthesis: none;
    -webkit-font-smoothing: antialiased;
    direction: ltr;
}

/* Enhance font spacing and line height */
.rm-title-display, .rm-title-textarea {
    line-height: 40px;
    letter-spacing: 0.22px;
}


.level1 {
    line-height: 26px;
    letter-spacing: -0.26px;
}

.level2 {
    line-height: 22px;
    letter-spacing: -0.43px;
}

.level3 {
    line-height: 20px;
    letter-spacing: -0.23px;
}

div, #right-sidebar .rm-title-display, #right-sidebar .rm-title-textarea {
    line-height: 18px;
    letter-spacing: -0.15px;
}

textarea {
    line-height: 16px;
}

/* Fix bullet position */
.controls, .rm-block__controls {
    padding-top: 5px;
}

.controls .simple-bullet-outer,
.rm-block__controls .simple-bullet-outer {
    margin-top: 3px;
    padding-left: 2px;
}

.roam-block-container .rm-block-main {
    align-items: inherit;
    justify-content: inherit;
}

.rm-bullet {
    margin-top: 2px;
}

.rm-bullet--numbered {
    margin-top: 0px;
}

/* Firefox specific fixes */
@-moz-document url-prefix() {
    .controls .simple-bullet-outer,
    .rm-block__controls .simple-bullet-outer {
        margin-top: 7.5px;
    }

    .controls,
    .rm-block__controls {
        padding-top: 3px;
    }

    .check-container {
        top: 4px;
    }

    .block-expand .rm-caret {
        margin-top: 6px;
    }

    .rm-bullet--numbered {
        margin-top: 3px;
    }
}

/* Align main block */
.roam-block-container .rm-block-main {
    padding-left: 4px;
}

/* Align multibar */
.rm-multibar {
    left: -2px;
}

/* Align references */
    .rm-reference-container>.flex-h-box {
    padding-bottom: 2px;
}

.rm-reference-main>div>div:nth-child(2)>div.flex-h-box {
    margin-top: 12px;
}

.rm-reference-item {
    margin-left: -2px; /*was +16px*/
}

.rm-caret {
    width: 16px;
    height:  17px;
}

.rm-mentions .rm-ref-page-view {
    margin-left: 15px;
}

.rm-mentions .rm-ref-page-view .rm-title-arrow-wrapper .rm-caret {
    padding: 0px;
}

/* Align caret for linked references */
.rm-reference-container>.flex-h-box {
    align-items: center;
}

.rm-reference-container>.flex-h-box>.rm-caret {
    margin-bottom: 1px;
}

/* Set min height for unlinked references */
.rm-reference-main > div > div:nth-child(2) > div {
    min-height: 31px;
}

/* Re-color Roam Research Logo */
#roam-sidebar-logo img {
    --webkit-filter: brightness(15%);
    filter: brightness(15%);
}

@media (prefers-color-scheme: dark) {
    #roam-sidebar-logo img {
        --webkit-filter: brightness(100%);
        filter: brightness(100%);
    }
}

/* Remove transparency from graph menu */
.roam-body .roam-app .roam-sidebar-container .rm-graph-dropdown {
    opacity: 1;
}

.roam-body .roam-app .roam-sidebar-container .rm-graph-dropdown .signout {
    opacity: 1;
}

/* Remove gradient from buttons */
.bp3-file-upload-input::after, .bp3-button:not([class*='bp3-intent-']) {
    background-image: none;
}

/* Fix border for popover menus */
.bp3-select-popover .bp3-popover-content {
    padding: 0;
}

.bp3-select-popover .bp3-menu {
    padding: 5px;
}

/* Fix starred pages wrapper */
.roam-body .roam-app .roam-sidebar-container .roam-sidebar-content .starred-pages-wrapper .starred-pages .page {
    padding: 4px 0px 4px 0px;
}

.roam-body .roam-app .roam-sidebar-container .roam-sidebar-content .log-button {
    padding:  4px 20px;
}

/* Change all pages column alignment to left */
.rm-all-pages .table .rm-pages-row .rm-pages-col {
    text-align: left;
}

/* Hide # for tags */
.rm-page-ref--tag {
    padding-left: 4px;
    padding-right: 4px;
}

/* Fix hr margin */
.rm-hr {
    margin-top: 10px;
    margin-bottom: 10px;
}

/* Fix table scrolling for Safari */
.roam-table td {
    overflow: auto;
}

/* Remove popover arrows */
.bp3-popover-arrow {
    display: none;
}

.roam-body .roam-app .roam-sidebar-container .roam-sidebar-content .top-row {
    padding:  7px 16px;
}

.roam-body .roam-app .roam-sidebar-container .roam-sidebar-content div:nth-child(2) {
    padding-top:  16px;
}

/* Remove gradient from all pages checkboxes */
.rm-all-pages .bp3-control .bp3-control-indicator {
    background-image: none;
}

/* Remove focus border */
:focus {
    outline: none;
}

/* Fix checkbox */
.check-container {
    height: 13px;
    width: 13px;
    top: 2px;
}

.check-container .checkmark::after {
    left: 4px;
    top: 1px;
}

/* Hide left sidebar icons */
.roam-body .roam-app .roam-sidebar-container .roam-sidebar-content .icon {
    display:  none;
}

/* Hide starred title */
.roam-body .roam-app .roam-sidebar-container .roam-sidebar-content .starred-pages-wrapper .title {
    display:  none;
}

#right-sidebar > .flex-h-box {
    padding: 10px 8px!important;
    margin-right: 2px!important;
}

#right-sidebar > .flex-h-box > .bp3-button {
    z-index: 100;
}

#right-sidebar {
    padding-top:  0px;
}

#app > div > div.roam-app > div.roam-sidebar-container.noselect > div > div:nth-child(2) {
    padding-top:  44px;
}

.roam-main .rm-topbar {
    padding-right: 44px;
}

.roam-main[style*='flex: 0 0 100%;'] .rm-topbar {
    padding-right: 16px;
}

#roam-right-sidebar-content > div:first-child {
    margin-top: 36px;
}

.bp3-menu-item .bp3-icon {
    display: none;
}

.rm-right-sidebar__helper-text {
    padding: 30px;
}

/* Blur Menus */
html {
  backgroundColor: white;
}

@media(prefers-color-scheme: dark) {
    html {
      backgroundColor: black;
    }
}

.rm-bq {
    margin-top: 10px;
    margin-bottom:  10px;
}

.rm-zoom.zoom-path-view {
    margin-top: 20px;
}

.bp3-submenu.bp3-popover {
    padding: 0;
}

/* Remove border from top panel in settings */
.rm-settings .rm-settings-panel__section.rm-settings-panel__section--top {
    padding-top: unset;
    border: none;
}

/* Remove background from scrollbar */
.bp3-dark .bp3-slider-handle.bp3-active {
    background-color: transparent;
}

.rm-settings ::-webkit-scrollbar:vertical {
    background: transparent;
}

.rm-all-pages {
    margin-top: 68px;
}

.rm-topbar {
    height: 44px;
}

.bp3-datepicker .bp3-datepicker-day-wrapper {
    padding: 8px;
}

/* Modify transitions */
.rm-find-or-create-wrapper, .roam-main, .roam-app > .flex-h-box, #right-sidebar {
    -webkit-transition: flex 40ms ease!important;
    transition: flex 40ms ease!important;
}

/* Remove bp3 divider */
.bp3-divider {
    display:  none;
}

/* Padding table */
.roam-table tr td {
    padding: .5em 1em .5em 0;
}

/* Cursor Color */
input,
textarea,
[contenteditable] {
    caret-color: #e06d71;
}

/* Hide Pomodoro Icons */
.rm-pomodoro > span:first-child {
    display:  none;
}

.rm-pomodoro.running:first-letter {
  color: transparent;
}

.rm-pomodoro {
  min-width: 100px;
  text-align:    center;
}

.rm-pomodoro.running {
  padding-top:   6px;
  padding-right: 28px;
}

.rm-pomodoro.break:first-letter {
  color: transparent;
}

.rm-pomodoro.break {
  padding-top:   6px;
  padding-right: 28px;
}

/* Fix elevation width for mobile */
@media screen and (max-width:400px) {
    .bp3-elevation-3 {
        width:  300px!important;
        max-width: 300px!important;
    }
}

/* Hide Code Block Gutter */
.CodeMirror-gutter-wrapper, .CodeMirror-gutters {
  display: none;
}

.CodeMirror {
  padding: 20px;
}

.CodeMirror-sizer {
  margin-left: 0px!important;
}

.roam-block-container {
    border-radius: 0;
}

.roam-body .roam-app .roam-main .roam-article {
    padding-top: 60px;
}

.roam-body .roam-app .roam-body-main {
    flex: 0 0 calc(100%);
}

.roam-main > .rm-files-dropzone {
    -webkit-backdrop-filter: saturate(180%) blur(20px);
    backdrop-filter: saturate(180%) blur(20px);
    background-color: rgba(255,255,255,0.6); 
    content: '';
    height: 44px;
    width: 100%;
    left: 0;
    top: 0;
    position: absolute;
    z-index: 100;
}


@media(prefers-color-scheme: dark) {
    .roam-main > .rm-files-dropzone {
        background-color: rgba(0,0,0,0.22); 
    }
}

.rm-topbar, .rm-topbar .bp3-input, .rm-topbar input[type=search] {
    background: rgba(255,255,255,0.5);
}

@media(prefers-color-scheme: dark) {
    .rm-topbar, .rm-topbar .bp3-input, .rm-topbar input[type=search] {
        background: rgba(0,0,0,0.5);
    }
}

.roam-body .roam-app .roam-sidebar-container .rm-graph-dropdown .menu-item {
    padding: 2px 7px;
}

.bp3-menu-item::before, .bp3-menu-item>.bp3-icon {
    margin-top: 0;
}

.bp3-icon.bp3-icon-caret-right {
    display: block;
}

.bp3-menu-item {
    padding: 3px 7px;
}

.rm-encrypted-block .bp3-button:not([class*='bp3-intent-']) {
    padding: 0px 7px!important;
}

.CodeMirror .CodeMirror-scroll {
  max-height: 960px;
}   